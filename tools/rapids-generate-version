#!/bin/bash
# A utility script that generates a pip wheel version
# Positional Arguments:
#   1) package name
#   2) package directory
set -exo pipefail
export RAPIDS_SCRIPT_NAME="rapids-generate-version"

if [ -z "$1" | -z "$2" ]; then
  rapids-echo-stderr "Must specify input arguments package name and directory"
  exit 1
fi
package_name="${1}"
package_dir="${2}"

dunamai_format="{base}"
if ! rapids-is-release-build; then
    # Nightlies include the distance from the last tag as the alpha version.
    dunamai_format="{base}{stage}{distance}"
fi

# Now change the version.
dunamai_version=$(python -m dunamai from git --format \"${dunamai_format}\")

echo -n ${dunamai_version}
